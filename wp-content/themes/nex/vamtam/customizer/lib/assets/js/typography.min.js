!function(t,e){"use strict";wp.customize.controlConstructor["vamtam-typography"]=wp.customize.Control.extend({ready:function(){var n,a=this,i=a.selector+" .font-family select",o=a.selector+" .variant select",s={};_.each(a.params.default,function(t,n){!1!==t&&(s[n]=t,e!==a.setting._value[n]&&(s[n]=a.setting._value[n]))}),_.each(a.setting._value,function(t,n){e!==s[n]&&void 0!==s[n]||(s[n]=t)});var c=function(e,n){var a=t(o),i=n||a.val();a.empty(),_.each(VAMTAM_ALL_FONTS,function(n){if(e===n.family)for(var i in n.weights){var o=t("<option>");o.text(n.weights[i]),a.append(o)}}),a.val(i||"normal")};t(i).val(a.setting._value["font-family"]),c(s["font-family"],s.variant),this.container.on("change",".font-family select",function(){s["font-family"]=jQuery(this).val(),a.saveValue(s),c(jQuery(this).val(),null)}),this.container.on("change",".variant select",function(){s.variant=jQuery(this).val(),a.saveValue(s)}),this.container.on("change keyup paste",".font-size input",function(){s["font-size"]=jQuery(this).val()+a.params.unit,a.saveValue(s)}),this.container.on("change keyup paste",".line-height input",function(){s["line-height"]=jQuery(this).val()+a.params.unit,a.saveValue(s)}),(n=this.container.find(".vamtam-color-picker")).wpColorPicker({change:function(){setTimeout(function(){s.color=n.val(),a.saveValue(s)},100)}})},saveValue:function(t){var e={};_.each(t,function(t,n){e[n]=t}),this.setting.set(e)}})}(jQuery);